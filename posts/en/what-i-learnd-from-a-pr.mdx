---
title: "Insights from a PR"
summary: Recently, I submitted a PR to an open-source project, and the author quickly responded, modified my code, and merged it into the main branch. This PR brought me many insights.
tag: Coding
createAt: 2023-06-23T01:23:00.000Z
---

Recently, I submitted a PR to an open-source project, and the author quickly responded, modified my code, and merged it into the main branch.

However, I gained much more than that. This PR brought me numerous insights, including the relationship between programmers and AI, the philosophy of programming, and more. In this article, I will share these insights in detail, hoping to inspire readers.

The project is a cross-device transfer tool developed using Flutter, and what I did was add the "press Esc to go back" functionality to several pages. The code to implement this feature is less than 100 lines and was entirely written with the help of ChatGPT.

The version written by GPT:

```dart
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';

class ShortcutWrapper extends StatelessWidget {
  final Widget child;
  final Map<LogicalKeySet, Intent> additionalShortcuts;

  ShortcutWrapper({
    required this.child,
    this.additionalShortcuts = const {},
  });

  @override
  Widget build(BuildContext context) {
    final shortcuts = {
      LogicalKeySet(LogicalKeyboardKey.escape): ActivateIntent(),
      ...additionalShortcuts,
    };

    return Shortcuts(
      shortcuts: shortcuts,
      child: Actions(
        actions: {
          ActivateIntent: CallbackAction<ActivateIntent>(
            onInvoke: (ActivateIntent intent) => Navigator.pop(context),
          ),
        },
        child: Focus(
          autofocus: true,
          child: child,
        ),
      ),
    );
  }
}
```

The author's modified version:

```dart
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:localsend_app/util/native/platform_check.dart';
import 'package:routerino/routerino.dart';

class ShortcutWatcher extends StatelessWidget {
  final Widget child;
  const ShortcutWatcher({required this.child});
  @override
  Widget build(BuildContext context) {
    return Shortcuts(
      shortcuts: {
        // The select button on AndroidTV needs this to work
        LogicalKeySet(LogicalKeyboardKey.select): const ActivateIntent(),
        // Add Control+Q binding for Linux
        // https://github.com/localsend/localsend/issues/194
        if (checkPlatform([TargetPlatform.linux])) LogicalKeySet(LogicalKeyboardKey.control, LogicalKeyboardKey.keyQ): _ExitAppIntent(),

        LogicalKeySet(LogicalKeyboardKey.escape): _PopPageIntent(),
      },
      child: Actions(
        actions: {
          _ExitAppIntent: CallbackAction(onInvoke: (_) => exit(0)),
          _PopPageIntent: CallbackAction(onInvoke: (_) async => Navigator.of(Routerino.context).maybePop()),
        },
        child: child,
      ),
    );
  }
}

class _ExitAppIntent extends Intent {}

class _PopPageIntent extends Intent {}
```

Before this, I had never worked with Flutter, and with the help of GPT, I quickly developed my own product. I applied this logic to my Flutter project and submitted the PR to this repository unchanged.

The author replied that we should apply this design globally and **significantly** **[modified](https://github.com/localsend/localsend/pull/543)** my code. I was shocked after seeing their modified version.

In an instant, I learned a few things:

**GPT does not proactively help us consider edge cases**, but rather executes precisely according to our instructions. In this PR, I only considered the exit logic for Windows and did not take into account the logic for Linux and Android TV. If I do not actively think about these situations while programming, I will only modify the code upon receiving user feedback. Considering various extreme situations should be a basic quality of a programmer.

Moreover, when the repository maintainer modified my code, they used some code organization methods I had never seen before. Without trying things out, solving bugs, or continuously adjusting the code structure, it is difficult to improve programming skills; it merely becomes a matter of completing a task.

The above situation arises because **we are accustomed to thinking that the code provided by GPT is perfect**.

When we get used to having GPT complete our requirements without writing code ourselves, our coding ability will decline sharply. If it is a project developed by a single person, it is even more concerning because no one points out the potential issues and areas for improvement in your code; only user feedback can help identify problems.

Therefore, **we should approach the code generated by GPT with a code review mindset**, rather than just "as long as it runs." You may be eager to become a prompt engineer, but I believe this is an unavoidable path to becoming a truly high-level programmer.

Feynman's words still hold true today: "Only by creating something can you truly understand it."

